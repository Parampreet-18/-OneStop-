document.addEventListener("DOMContentLoaded", function () {
    displayTrendingHotels();
    
    // Setup dark mode toggle
    const darkModeToggle = document.getElementById("darkModeToggle");
    darkModeToggle.addEventListener("click", toggleDarkMode);
});

// List of hotels (Dynamic Data)
const hotels = [
    {
        name: "Taj Hotel, Mumbai",
        description: "5-star luxury hotel near Gateway of India",
        price: "₹10,500 per night",
        image: "Taj-Hotel.jpg"
    },
    {
        name: "Coorg Homestay",
        description: "Beautiful homestay in the middle of coffee plantations",
        price: "₹3,200 per night",
        image: "Coorg-Homestay.jpg"
    },
    {
        name: "Goa Beach Resort",
        description: "Enjoy a relaxing beachside stay in Goa",
        price: "₹7,500 per night",
        image: "Goa-Beach-Resort.jpg"
    },
    {
        name: "Jaipur Royal Palace",
        description: "Experience a luxurious royal stay in Jaipur",
        price: "₹8,000 per night",
        image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTkq_VHxX7wBw0uXhlX6Q5-ueKgRxS2xJlb8Q&s"
    },
    {
        name: "Manali Mountain Resort",
        description: "A peaceful resort in the snowy mountains of Manali",
        price: "₹5,500 per night",
        image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQEhGNir1Ww-yHsxjOImzMPDdgCdZwqEBeAeQ&s"
    },
    {
        name: "Kerala Backwater Villa",
        description: "Stay in a beautiful villa near the serene backwaters of Kerala",
        price: "₹6,800 per night",
        image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS03WsdHvCw5J8I7m4fLyP_dcNe8ojLaWXaGQ&s"
    },
    {
        name: "Rajasthan Desert Camp",
        description: "Luxury tent stay in the heart of the Thar Desert",
        price: "₹4,500 per night",
        image: "https://static.toiimg.com/photo/msid-115695045,width-96,height-65.cms"
    },
    {
        name: "Ooty Hilltop Cottage",
        description: "Cozy cottage stay with breathtaking views in Ooty",
        price: "₹3,900 per night",
        image: "https://res.cloudinary.com/voyehomes/image/upload/w_1280,f_auto,c_scale/v1721993939/property/107/image/d5830ff7-42f7-4c92-a447-1073b7877d92.jpg"
    },
    {
        name: "Shimla Heritage Hotel",
        description: "A heritage hotel with a colonial charm in Shimla",
        price: "₹6,200 per night",
        image: "https://media-cdn.tripadvisor.com/media/photo-s/0e/66/1f/75/hotel-facade.jpg"
    },
    {
        name: "Darjeeling Tea Estate Retreat",
        city: "darjeeling",
        description: "A peaceful retreat in the middle of Darjeeling's tea gardens",
        price: "₹5,000 per night",
        image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT-aeIJL8pJLAQgz_xjPTX92Wg6ffDwf2xvAA&s"
    },
    {
        name: "Rishikesh Riverside Resort",
        city: "rishikesh",
        description: "Relax by the Ganges in this beautiful riverside resort",
        price: "₹5,200 per night",
        image: "https://cf.bstatic.com/xdata/images/hotel/max1024x768/514051210.jpg?k=6dd34390e2b2de9688101408f7800eb9fc2b69ddef9a93e2087cb6b510f52379&o=&hp=1"
    },
    {
        name: "Bangalore Business Hotel",
        city: "bangalore",
        description: "Perfect stay for business and leisure in the tech city",
        price: "₹6,500 per night",
        image: "https://images.trvl-media.com/lodging/5000000/4320000/4319200/4319124/32340772.jpg?impolicy=fcrop&w=357&h=201&p=1&q=medium"
    }
];



function searchHotels() {
    let searchQuery = document.getElementById("searchBox").value.toLowerCase();
    let checkinDate = document.getElementById("checkin").value;
    let checkoutDate = document.getElementById("checkout").value;
    
    // Guest details
    let adults = document.getElementById("adults").value;
    let children = document.getElementById("children").value;
    let rooms = document.getElementById("rooms").value;
    let pets = document.getElementById("pets").value;
    
    // Sorting option
    let sortBy = document.getElementById("sortBy").value;

    if (!searchQuery || !checkinDate || !checkoutDate) {
        alert("Please enter all required fields!");
        return;
    }

    // Filter hotels based on city match
    let filteredHotels = hotels.filter(hotel => hotel.city.toLowerCase().includes(searchQuery));

    if (filteredHotels.length === 0) {
        alert("No hotels found in this location!");
        return;
    }
    
    // Sort hotels if option selected
    if (sortBy === "lowToHigh") {
        filteredHotels.sort((a, b) => a.price - b.price);
    } else if (sortBy === "highToLow") {
        filteredHotels.sort((a, b) => b.price - a.price);
    }
    
    displayHotels(filteredHotels);
}

function displayHotels(hotelList) {
    let hotelsContainer = document.getElementById("hotelsContainer");
    hotelsContainer.innerHTML = ""; // Clear previous content
    
    hotelList.forEach(hotel => {
        let hotelCard = `
            <div class="hotel">
                <img src="${hotel.image}" alt="${hotel.name}">
                <h3>${hotel.name}</h3>
                <p class="price">$${hotel.price} / night</p>
                <button>Book Now</button>
            </div>
        `;
        hotelsContainer.innerHTML += hotelCard;
    });
}

function displayTrendingHotels() {
    displayHotels(hotels);
}

function toggleDarkMode() {
    document.body.classList.toggle("dark");
    
    const darkModeToggle = document.getElementById("darkModeToggle");
    if(document.body.classList.contains("dark")) {
        darkModeToggle.textContent = "Light Mode";
    } else {
        darkModeToggle.textContent = "Dark Mode";
    }
}
